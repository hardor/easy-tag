<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;"> <!ENTITY times "&#215;"> <!ENTITY copy "&#211;">]>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="/templates/main-template.xhtml">
        <ui:define name="content">
            <div class="span7">
                <div class="box paint color_7">
                    <div class="title">
                        <h4>
                            <i class="icon-book"></i>
                            <span>Edit Information</span>
                        </h4>
                    </div>
                    <div class="content">
                        <h:form id="change_user_info" class="form-horizontal row-fluid" enctype="multipart/form-data">
                            <h:messages id="messages" title="Info" showDetail="true"/>
                            <div class="form-row control-group row-fluid">
                                <label class="control-label span3" for="normal-field">First Name</label>
                                <div class="controls span9">
                                    <h:inputText  class="row-fluid"  value="#{userInfoBean.firstName}"/>
                                </div>
                            </div>

                            <div class="form-row control-group row-fluid">
                                <label class="control-label span3" for="normal-field">Last Name</label>
                                <div class="controls span9">                                    
                                    <h:inputText  class="row-fluid" value="#{userInfoBean.lastName}"/>
                                </div>
                            </div>

                            <div class="form-row control-group row-fluid">
                                <label class="control-label span3" for="default-textarea">About Me</label>
                                <div class="controls span9">              
                                    <h:inputTextarea rows="3" class="row-fluid" value="#{userInfoBean.information}"/>               
                                </div>
                            </div>

                            <div class="form-row control-group row-fluid">
                                <label class="control-label span3" for="normal-field">Email</label>
                                <div class="controls span9">
                                    <h:inputText type="email" class="row-fluid" value="#{userInfoBean.email}"/>
                                </div>
                            </div>

                            <div class="form-row control-group row-fluid">
                                <label class="control-label span3" for="normal-field">Phone</label>
                                <div class="controls span9">
                                    <h:inputText  class="row-fluid" value="#{userInfoBean.phone}"/>
                                </div>
                            </div>                         
                            <div class="form-actions row-fluid">
                                <div class="span7 ">                                           
                                    <h:commandLink type="submit" class="btn btn-primary" value="Save"  actionListener="#{userInfoBean.saveParametersAction(evt)}">
                                        <f:ajax render=":change_user_info" execute="@form"/>
                                    </h:commandLink>
                                    <h:link class="btn btn-primary" value="Cancel" outcome="/user/profile/index"/>
                                </div>                                
                            </div>
                        </h:form>   
                        <h:form id="avatar_form" enctype="multipart/form-data"> 
                            <div class="form-row control-group row-fluid">
                                <label class="control-label span3" for="normal-field">Avatar (max 100 kb)</label>
                                <div class="controls span9">
                                    <h:graphicImage value="/#{userInfoBean.avatar}" class="height_medium"/>
                                    <br/> 
                                    <p:messages showDetail="true"/>
                                    <p:fileUpload allowTypes="*.jpe?g; *.png; *.gif;" value="#{fileUploadController.file}" mode="simple"/>
                                    <p:commandButton value="Submit" ajax="false"   actionListener="#{fileUploadController.upload}">  
                                        <f:ajax execute="@this" render="@all"/>
                                    </p:commandButton>
                                    <br/> 
                                </div>
                            </div>   
                        </h:form> 
                    </div>
                    <a class="btn change_color_outside">
                        <i class="paint_bucket"></i>
                    </a>
                </div>
            </div>
        </ui:define>     
    </ui:composition>

</html>
